name: Tonomy SDK publish


# permissions:
#   contents: write

on:
  push:
    # branches:
    #   - development
      
jobs:

  publish-npm:
    runs-on: ubuntu-20.04
    steps:
      - name: 🏗 Setup repo
        uses: actions/checkout@v3

      - name: 📦 Install
        uses: actions/setup-node@v3
        with:
          node-version: 16.4.1
          registry-url: https://registry.npmjs.org/

      - name: 🚀 Build and publish SDK
        uses: actions/setup-node@v3
        with:
          node-version: 16.4.1
      - run: npm i
      - run: npm run build
      - run: npx np patch --branch=fix/168-publish-sdk-bug --no-cleanup --no-tests
        env:
          NPM_TOKEN: ${{secrets.NPM_TOKEN}}

     